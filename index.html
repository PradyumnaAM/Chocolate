<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Chocolate Emergency</title>

<style>
* {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
}

body {
    font-family: 'Comic Sans MS', cursive;
    height: 100vh;
    overflow: hidden;
}

/* ================= INTRO ================= */

#intro {
    position: fixed;
    inset: 0;
    background: black;
    color: white;
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    text-align: center;
    padding: 20px;
}

#storyText {
    font-size: clamp(22px, 5vw, 48px);
    max-width: 90%;
    line-height: 1.4;
}

#continueBtn, #skipBtn {
    margin-top: 30px;
    padding: 12px 30px;
    font-size: clamp(16px, 4vw, 20px);
    border-radius: 30px;
    border: none;
    cursor: pointer;
}

#skipBtn {
    position: absolute;
    top: 15px;
    right: 15px;
    background: #ff6a88;
    color: white;
}

/* ================= GAME ================= */

#gameScreen {
    display: none;
    height: 100vh;
    width: 100vw;
    background: linear-gradient(-45deg, #ff6a88, #ff99ac, #ff758c, #ffb199);
    background-size: 400% 400%;
    animation: gradientMove 8s ease infinite;
    color: white;
    flex-direction: column;
    align-items: center;
    justify-content: space-between;
    padding: 10px;
}

@keyframes gradientMove {
    0% { background-position: 0% 50%; }
    50% { background-position: 100% 50%; }
    100% { background-position: 0% 50%; }
}

h1 {
    font-size: clamp(24px, 6vw, 60px);
    margin-top: 10px;
    text-align: center;
}

#scene {
    flex: 1;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 8vw;
    width: 100%;
}

/* Stack vertically on small screens */
@media (max-width: 768px) {
    #scene {
        flex-direction: column;
        gap: 20px;
    }
}

.character {
    width: clamp(150px, 35vw, 420px);
    height: auto;
    transition: 0.4s ease;
}

#message {
    font-size: clamp(18px, 4.5vw, 32px);
    text-align: center;
    margin: 10px;
    padding: 0 10px;
}

.buttons {
    margin-bottom: 20px;
}

button {
    padding: 12px 25px;
    font-size: clamp(16px, 4vw, 24px);
    margin: 10px;
    border-radius: 40px;
    border: none;
    cursor: pointer;
    transition: 0.3s;
}

#yesBtn { background: #00ffcc; }
#noBtn { background: #ff0033; color: white; }

button:active {
    transform: scale(1.1);
}

/* ================= ENDING ================= */

#ending {
    position: fixed;
    inset: 0;
    background: black;
    color: white;
    display: none;
    justify-content: center;
    align-items: center;
    flex-direction: column;
    text-align: center;
    font-size: clamp(28px, 8vw, 60px);
    padding: 20px;
}

#restartBtn {
    margin-top: 30px;
    padding: 12px 30px;
    font-size: clamp(16px, 4vw, 22px);
    border-radius: 30px;
    border: none;
    cursor: pointer;
}

</style>
</head>
<body>

<!-- AUDIO -->
<audio id="storyMusic" src="story.mp3" loop></audio>
<audio id="gameMusic" src="game.mp3" loop></audio>

<!-- INTRO -->
<div id="intro">
    <button id="skipBtn">Skip ‚è≠</button>
    <div id="storyText"></div>
    <button id="continueBtn" style="display:none;">Continue...</button>
</div>

<!-- GAME -->
<div id="gameScreen">
    <h1>üç´ CHOCOLATE EMERGENCY üç´</h1>

    <div id="scene">
        <img src="doctor.png" class="character">
        <img src="fat1.png" id="guy" class="character">
    </div>

    <div id="message">
        Doctor‚Ä¶ will you accept this life-saving chocolate? üç´üíñ
    </div>

    <div class="buttons">
        <button id="yesBtn">YES üíù</button>
        <button id="noBtn">NO üò°</button>
    </div>
</div>

<!-- ENDING -->
<div id="ending">
    <div>He Died üò¢</div>
    <div style="font-size:clamp(16px,4vw,25px); margin-top:15px;">
        Chocolate Overdose...
    </div>
    <button id="restartBtn">Restart üîÑ</button>
</div>

<script>

/* STORY */

const storyLines = [
"There was a man named Pradyumna...",
"A chocolate monster bit him and he has been addicted to chocolates...",
"If he continues eating chocolates, he is going to DIE...",
"The only person that can save him is the most famous doctor BUJJI...",
"Now? What will happen...."
];

let index = 0;
const storyText = document.getElementById("storyText");
const continueBtn = document.getElementById("continueBtn");
const storyMusic = document.getElementById("storyMusic");
const gameMusic = document.getElementById("gameMusic");

function showLine() {
    if(index < storyLines.length){
        storyText.innerHTML = storyLines[index];
        index++;
        setTimeout(showLine, 2500);
    } else {
        continueBtn.style.display = "block";
    }
}

function startStory(){
    index = 0;
    continueBtn.style.display = "none";
    showLine();
}

document.addEventListener("click", () => {
    storyMusic.play().catch(()=>{});
}, { once: true });

startStory();

/* START GAME */

function startGame(){
    storyMusic.pause();
    gameMusic.play().catch(()=>{});
    document.getElementById("intro").style.display = "none";
    document.getElementById("gameScreen").style.display = "flex";
}

document.getElementById("continueBtn").onclick = startGame;
document.getElementById("skipBtn").onclick = startGame;

/* GAME LOGIC */

let noCount = 1;
const guy = document.getElementById("guy");
const ending = document.getElementById("ending");
const message = document.getElementById("message");

document.getElementById("yesBtn").onclick = function(){
    guy.src = "handsome.png";
    message.innerHTML = "He transformed into HANDSOME mode and now offers YOU chocolate üòåüç´";
};

document.getElementById("noBtn").onclick = function(){
    noCount++;
    if(noCount <= 7){
        guy.src = "fat" + noCount + ".png";
        message.innerHTML = "He is growing stronger‚Ä¶ in CHUBBINESS üò≠üç´";
    }
    if(noCount > 7){
        gameMusic.pause();
        ending.style.display = "flex";
    }
};

document.getElementById("restartBtn").onclick = function(){
    ending.style.display = "none";
    document.getElementById("gameScreen").style.display = "none";
    document.getElementById("intro").style.display = "flex";
    gameMusic.pause();
    storyMusic.play();
    noCount = 1;
    guy.src = "fat1.png";
    message.innerHTML = "Doctor‚Ä¶ will you accept this life-saving chocolate? üç´üíñ";
    startStory();
};

</script>

</body>
</html>
